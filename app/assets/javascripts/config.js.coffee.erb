# Environment-specific config
@edsc.config = do (window, env='<%= Rails.env %>') ->

  csrfToken = document.querySelector?('meta[name=csrf-token]')?.content

  <% if Rails.env.test? %>

  window.onerror = (message, filename, lineno, colno, e) ->
    console.error "#{message} [#{filename}:#{lineno}]"
    false

  # Test config
  exports =
    defaultAnimationDurationMs: 0
    maxPolygonSize: 50
    csrfToken: csrfToken
    hoverTimeoutMs: 0

  <% elsif Rails.env.development? %>
  # Development config
  exports =
    defaultAnimationDurationMs: 300
    maxPolygonSize: 50
    csrfToken: csrfToken
    hoverTimeoutMs: 500

  <% elsif Rails.env.production? %>
  # Production config
  exports =
    defaultAnimationDurationMs: 300
    maxPolygonSize: 50
    csrfToken: csrfToken
    hoverTimeoutMs: 500

  <% end %>
